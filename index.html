<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnonyHackz</title>
    <link rel="icon" type="image/png" sizes="32x32" href="Common/Media/Logo/logo-white.png">
    <script defer type="text/javascript" src="assets/lib/JS/vjhex.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="assets/lib/CSS/vjhex.css">
</head>
<body id="container">
   
    <div id="HdIntro">
        <div id="parent">  
            <img id="icon" src="Common/Media/Logo/logo-white.png">
            <h1 id="hd">Anony Hackz</h1> 
        </div>
        
    </div>


    <div id="main" style="color: beige;" >
        <p id="intro">Thank you for selecting our Anony Hackz learning platform. We highly appreciate your decision and are delighted to have you as part of our community.</p>
        <div id="bDiv"></div>
        <p id="llinking">Explore <a id="LS" onclick="log_In()">Log In</a></p>
        <p id="slinking">Don't have an account?, Create new one <a id="LS" onclick="sig_Up()">Sign Up</a></p>
    </div>



    <div id="l_in" class="l_In" style="color: beige;" ><hr size="10" color="white">
        <h1 style="color: beige;">Log In</h1>
        <p id="lin" style="color:coral;"></p>
        <form id="lof">
            
                <label class="lbl" for="username" >
                    <img id="d" src="Common/Media/Icons/1.png" alt="Username Icon" />
                </label>
                <input type="text" id="l_username" name="username" placeholder="Username" required /><br>
            
                <label class="lbl" for="password">
                    <img id="d" src="Common/Media/Icons/2.png" alt="Username Icon" />
                </label>
                <input type="password" id="l_password" name="password" placeholder="Password" required /><br>
                <button id="subt" type="submit">Login</button>
        </form>
        <p >Don't have an account? <a id="LS" onclick="sig_Up()">Sign Up</a></p>
        
    </div>


    <div style="color: beige;" id="s_up" class="l_In"><hr size="10" color="white">
        <h1 >Sign In</h1>
        <p id="sig"></p>
        <form id="sif">
            
            <label class="lbl" for="username" >
                <img id="d" src="Common/Media/Icons/1.png" alt="Username Icon" />
            </label>
            <input type="text" id="s_username" name="username" placeholder="Username" required /><br>
            <label class="lbl" for="password">
                <img id="d" src="Common/Media/Icons/2.png" alt="Username Icon" />
            </label>
            <input type="password" id="s_password" name="password" placeholder="Password" required /><br>
            <label class="lbl" for="C_password">
                <img id="d" src="Common/Media/Icons/2.png" alt="Username Icon" />
            </label>
            <input type="password" id="s_Cpassword" name="C_password" placeholder="Confirm Password" required /><br>
            <button id="subt" type="submit">Sign Up</button>
        </form>
        <p >Already have an account? <a id="LS" onclick="log_In()">Log In</a></p>
        
    </div>

  <script>document.getElementById('main').style.display = 'block';
    document.getElementById('l_in').style.display = 'none';
    document.getElementById('s_up').style.display = 'none';
    
    function sig_Up(){
        document.getElementById('main').style.display = 'none';
        document.getElementById('l_in').style.display = 'none';
        document.getElementById('s_up').style.display = 'block';
    }
    function log_In(){
        document.getElementById('main').style.display = 'none';
        document.getElementById('l_in').style.display = 'block';
        document.getElementById('s_up').style.display = 'none';
    }
    
    
    
    // Login form submit event
    document.getElementById('lof').addEventListener('submit', async function (e) {
        e.preventDefault();
    
        const username = document.getElementById('l_username').value;
        const password = document.getElementById('l_password').value;
    
        try {
            const response = await fetch('https://2.49.66.28:3000/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username, password }),
            });
    
            const rlt = await response.json();
            
            if (rlt.success) {
                document.getElementById('bDiv').innerHTML= rlt.buHTML;
                document.getElementById('l_in').style.display = 'none';
                document.getElementById('s_up').style.display = 'none';
                document.getElementById('main').style.display = 'block';
               
                document.getElementById("llinking").style.display ='none';
                document.getElementById("slinking").style.display ='none';
                    
                
                
            } else {
                document.getElementById('lin').innerText = rlt.msg;
            }
        } catch (error) {
            console.error('Error during login:', error);
        }
    });
    
    
    
    
    // Sign-up form submit event
    document.getElementById('sif').addEventListener('submit', async function (e) {
        e.preventDefault();
    
        const username = document.getElementById('s_username').value;
        const password = document.getElementById('s_password').value;
        const confirmPassword = document.getElementById('s_Cpassword').value;
    
        // Check if passwords match
        if (password !== confirmPassword) {
            document.getElementById('sig').innerText = 'Passwords do not match!';
            return;
        }
    
        try {
            const response = await fetch('https://2.49.66.28:3000/signup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username, password }),
            });
    
            const result = await response.json();
    
            if (result.success) {
                document.getElementById('sig').innerText = 'Account created successfully! You can log in now.';
                document.getElementById('s_up').style.display = 'none';
                document.getElementById('l_in').style.display = 'block';
            } else {
                document.getElementById('sig').innerText = result.msg;
            }
        } catch (error) {
            console.error('Error during sign-up:', error);
        }
    });
    
    
    
    
    
    
    
    
    
            // On page load, check if we have HTML stored in localStorage
            window.onload = function() {
                const buttonHTML = localStorage.getItem('buHTML');
                if (buttonHTML) {
                    document.getElementById('bDiv').innerHTML = buttonHTML;
                    localStorage.removeItem('buHTML'); // Clear it after use
                }
            };
</script>
hellow
</body>
</html>